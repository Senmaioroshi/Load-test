# Тестовое задание на "Автотестирование (Python)"

Программа для тестирования доступности серверов по HTTP протоколу. Программа должна замерять время выполнения запроса и выводить итоговую статистику по скорости ответа сервера.

## Функциональность

- Проверка валидности URL по регулярному выражению
- Тестирование доступности серверов (HTTP коды ответа)
- Измерение времени отклика (MIN/MAX/AVG)
- Поддержка тестирования нескольких URL одновременно
- Возможность вывода результатов в консоль или файл
- Читать URL`s из файла.

В выводе отображаются:
- Host – имя тестируемого хоста.
- Success – количество успешных запросов.
- Failed – количество запросов, на которые сервер ответил ошибкой (400 или 500).
- Errors – количество запросов, во время которых сервер был недоступен.
- Min – минимальное время выполнения запроса.
- Max – максимальное время выполнения запроса.
- Avg – среднее время выполнения запроса.

## Требования

- Python 3.6+
- Библиотека `requests`

## Установка

1. Склонируйте репозиторий:
```bash
git clone https://github.com/Senmaioroshi/Load-test
```
2. Установите зависимости:

```bash
pip install -r requirements.txt
```

## Использование

###Основные параметры:
```text
-H, --hosts    Список URL через запятую (например, "https://ya.ru,https://google.com")
-C, --count    Количество запросов для каждого хоста (по умолчанию: 1)
-F, --file     Файл со списком URL (по одной строке на URL)
-O, --output   Файл для записи результатов (если не указан - вывод в консоль)
```
### Примеры запуска:
Тестирование одного хоста с 5 запросами:
```bash
python tester.py -H "https://ya.ru" -C 5
```
Тестирование нескольких хостов:
```bash
python tester.py -H "https://ya.ru,https://google.com" -C 3
```
Тестирование хостов из файла:
```bash
python tester.py -F hosts.txt -C 2
```
Сохранение результатов в файл:
```bash
python tester.py -F hosts.txt -O results.log
```
### Пример вывода:
```text
##################################################
Host: https://ya.ru
Success: 5
Failed: 0
Errors: 0
Min: 45.23 ms
Max: 78.56 ms
Avg: 62.15 ms
##################################################

##################################################
Host: https://google.com
Success: 5
Failed: 0
Errors: 0
Min: 120.45 ms
Max: 185.67 ms
Avg: 150.32 ms
##################################################
```
### Формат файла hosts.txt

Каждый URL должен быть на отдельной строке:

```text
https://ya.ru
https://google.com
https://example.com
```
## Ограничения
Поддерживаются только HTTPS URL

URL должны соответствовать формату: https://домен.[домен...]/[путь]

Таймаут запроса: 2 секунды (можно поменять в cfg.py)
